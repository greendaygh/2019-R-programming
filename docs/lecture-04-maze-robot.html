<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>5 Lecture 04 - Maze Robot | [2019 UST 일반강의] R 프로그래밍과 데이터 분석</title>
  <meta name="description" content="2019년 UST 강의 R 프로그래밍 웹사이트">
  <meta name="generator" content="bookdown  and GitBook 2.6.7">

  <meta property="og:title" content="5 Lecture 04 - Maze Robot | [2019 UST 일반강의] R 프로그래밍과 데이터 분석" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="2019년 UST 강의 R 프로그래밍 웹사이트" />
  <meta name="github-repo" content="https://greendaygh.github.io/Rprog2019/" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Lecture 04 - Maze Robot | [2019 UST 일반강의] R 프로그래밍과 데이터 분석" />
  
  <meta name="twitter:description" content="2019년 UST 강의 R 프로그래밍 웹사이트" />
  

<meta name="author" content="Haseong Kim">


<meta name="date" content="2019-05-29">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="lecture-03-r-basics-ii.html">
<link rel="next" href="lecture-05-multiple-plate-reader-file.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Lecture 개요</a><ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#goal--"><i class="fa fa-check"></i><b>1.1</b> Goal 강의 목표</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#references--"><i class="fa fa-check"></i><b>1.2</b> References 참고 자료</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#evaluation---"><i class="fa fa-check"></i><b>1.3</b> Evaluation 평가 세부 항목</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#schedule--"><i class="fa fa-check"></i><b>1.4</b> Schedule 강의 계획</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#lecture-note--"><i class="fa fa-check"></i><b>1.5</b> Lecture note 강의 자료</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="lecture-01-r-introduction.html"><a href="lecture-01-r-introduction.html"><i class="fa fa-check"></i><b>2</b> Lecture 01 - R Introduction</a></li>
<li class="chapter" data-level="3" data-path="lecture-02-r-basics-i.html"><a href="lecture-02-r-basics-i.html"><i class="fa fa-check"></i><b>3</b> Lecture 02 - R basics I</a><ul>
<li class="chapter" data-level="3.1" data-path="lecture-02-r-basics-i.html"><a href="lecture-02-r-basics-i.html#exercise-2-1-who-function"><i class="fa fa-check"></i><b>3.1</b> exercise 2-1: who function</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html"><i class="fa fa-check"></i><b>4</b> Lecture 03 - R Basics II</a><ul>
<li class="chapter" data-level="4.1" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#matrix-"><i class="fa fa-check"></i><b>4.1</b> matrix (행렬)</a></li>
<li class="chapter" data-level="4.2" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#data.frame"><i class="fa fa-check"></i><b>4.2</b> data.frame</a></li>
<li class="chapter" data-level="4.3" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#list"><i class="fa fa-check"></i><b>4.3</b> list</a></li>
<li class="chapter" data-level="4.4" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#file-"><i class="fa fa-check"></i><b>4.4</b> File 읽기/쓰기</a></li>
<li class="chapter" data-level="4.5" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#excel-file-"><i class="fa fa-check"></i><b>4.5</b> Excel file 읽기/쓰기</a></li>
<li class="chapter" data-level="4.6" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#exercise-3-2-standard-deviation"><i class="fa fa-check"></i><b>4.6</b> Exercise 3-2 standard deviation</a></li>
<li class="chapter" data-level="4.7" data-path="lecture-03-r-basics-ii.html"><a href="lecture-03-r-basics-ii.html#exercise-3-3-barplot-with-error-bars"><i class="fa fa-check"></i><b>4.7</b> Exercise 3-3 barplot with error bars</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html"><i class="fa fa-check"></i><b>5</b> Lecture 04 - Maze Robot</a><ul>
<li class="chapter" data-level="5.1" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#parameterargument-globallocal"><i class="fa fa-check"></i><b>5.1</b> Parameter/Argument, Global/Local</a></li>
<li class="chapter" data-level="5.2" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#exercise-4-1-matrix-indexing"><i class="fa fa-check"></i><b>5.2</b> Exercise 4-1: Matrix indexing</a></li>
<li class="chapter" data-level="5.3" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#top-down-design"><i class="fa fa-check"></i><b>5.3</b> Top-down design</a></li>
<li class="chapter" data-level="5.4" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#exercise-4-2-draw-world"><i class="fa fa-check"></i><b>5.4</b> Exercise 4-2: Draw world</a></li>
<li class="chapter" data-level="5.5" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#exercise-4-4-generate-map"><i class="fa fa-check"></i><b>5.5</b> Exercise 4-4: Generate map</a></li>
<li class="chapter" data-level="5.6" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#draw-blocks-and-walls"><i class="fa fa-check"></i><b>5.6</b> Draw blocks and walls</a></li>
<li class="chapter" data-level="5.7" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#move-one-step"><i class="fa fa-check"></i><b>5.7</b> Move one step</a></li>
<li class="chapter" data-level="5.8" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#sleep-for-delay"><i class="fa fa-check"></i><b>5.8</b> Sleep for delay</a></li>
<li class="chapter" data-level="5.9" data-path="lecture-04-maze-robot.html"><a href="lecture-04-maze-robot.html#move-50-steps"><i class="fa fa-check"></i><b>5.9</b> Move 50 steps</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html"><i class="fa fa-check"></i><b>6</b> Lecture 05 - Multiple plate reader file</a><ul>
<li class="chapter" data-level="6.1" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#file-io--"><i class="fa fa-check"></i><b>6.1</b> File I/O 파일 입출력</a></li>
<li class="chapter" data-level="6.2" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#plot-"><i class="fa fa-check"></i><b>6.2</b> plot 산포도</a></li>
<li class="chapter" data-level="6.3" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#hist-"><i class="fa fa-check"></i><b>6.3</b> hist 히스토그램</a></li>
<li class="chapter" data-level="6.4" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#boxplot-"><i class="fa fa-check"></i><b>6.4</b> boxplot 상자그래프</a></li>
<li class="chapter" data-level="6.5" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#barplot-"><i class="fa fa-check"></i><b>6.5</b> barplot 막대그래프</a></li>
<li class="chapter" data-level="6.6" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#other-examples--"><i class="fa fa-check"></i><b>6.6</b> other examples 그래프 예시</a></li>
<li class="chapter" data-level="6.7" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#multiplate-reader--"><i class="fa fa-check"></i><b>6.7</b> Multiplate reader 기능 구현</a></li>
<li class="chapter" data-level="6.8" data-path="lecture-05-multiple-plate-reader-file.html"><a href="lecture-05-multiple-plate-reader-file.html#multiplate-reader-function-"><i class="fa fa-check"></i><b>6.8</b> Multiplate reader function 만들기</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="lecture-06-multiple-plate-reader-ggplot.html"><a href="lecture-06-multiple-plate-reader-ggplot.html"><i class="fa fa-check"></i><b>7</b> Lecture 06 - Multiple plate reader / ggplot</a><ul>
<li class="chapter" data-level="7.1" data-path="lecture-06-multiple-plate-reader-ggplot.html"><a href="lecture-06-multiple-plate-reader-ggplot.html#multiple_plate_excel_reader--"><i class="fa fa-check"></i><b>7.1</b> multiple_plate_excel_reader 함수 만들기</a></li>
<li class="chapter" data-level="7.2" data-path="lecture-06-multiple-plate-reader-ggplot.html"><a href="lecture-06-multiple-plate-reader-ggplot.html#multiple_plate_excel_reader2--"><i class="fa fa-check"></i><b>7.2</b> multiple_plate_excel_reader2 함수 업데이트</a></li>
<li class="chapter" data-level="7.3" data-path="lecture-06-multiple-plate-reader-ggplot.html"><a href="lecture-06-multiple-plate-reader-ggplot.html#read-data"><i class="fa fa-check"></i><b>7.3</b> Read data</a></li>
<li class="chapter" data-level="7.4" data-path="lecture-06-multiple-plate-reader-ggplot.html"><a href="lecture-06-multiple-plate-reader-ggplot.html#ggplot--barplot-"><i class="fa fa-check"></i><b>7.4</b> ggplot 이용 barplot 그리기</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html"><i class="fa fa-check"></i><b>8</b> Lecture 07 - ggplot / data transformation</a><ul>
<li class="chapter" data-level="8.1" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html#bar-graph-with-basic-graph-functions"><i class="fa fa-check"></i><b>8.1</b> Bar graph with basic graph functions</a></li>
<li class="chapter" data-level="8.2" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html#bar-graph-with-ggplot"><i class="fa fa-check"></i><b>8.2</b> Bar graph with ggplot</a></li>
<li class="chapter" data-level="8.3" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html#line-graph-with-ggplot"><i class="fa fa-check"></i><b>8.3</b> Line graph with ggplot</a></li>
<li class="chapter" data-level="8.4" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html#bar-graph-of-the-example-dataset"><i class="fa fa-check"></i><b>8.4</b> Bar graph of the example dataset</a></li>
<li class="chapter" data-level="8.5" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html#ddplyr---pipe-operator"><i class="fa fa-check"></i><b>8.5</b> ddplyr - pipe operator</a></li>
<li class="chapter" data-level="8.6" data-path="lecture-07-ggplot-data-transformation.html"><a href="lecture-07-ggplot-data-transformation.html#dplyr---important-functions"><i class="fa fa-check"></i><b>8.6</b> dplyr - Important functions</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="lecture-08-ggplot-data-transformation-using-dplyr.html"><a href="lecture-08-ggplot-data-transformation-using-dplyr.html"><i class="fa fa-check"></i><b>9</b> Lecture 08 - ggplot / data transformation using dplyr</a><ul>
<li class="chapter" data-level="9.1" data-path="lecture-08-ggplot-data-transformation-using-dplyr.html"><a href="lecture-08-ggplot-data-transformation-using-dplyr.html#dplyr-mutate-select-"><i class="fa fa-check"></i><b>9.1</b> dplyr mutate / select 함수</a></li>
<li class="chapter" data-level="9.2" data-path="lecture-08-ggplot-data-transformation-using-dplyr.html"><a href="lecture-08-ggplot-data-transformation-using-dplyr.html#ggplot2----bar-graph--"><i class="fa fa-check"></i><b>9.2</b> ggplot2를 이용한 두 개의 bar graph 겹쳐 그리기</a></li>
<li class="chapter" data-level="9.3" data-path="lecture-08-ggplot-data-transformation-using-dplyr.html"><a href="lecture-08-ggplot-data-transformation-using-dplyr.html#dplyr--iris-data-"><i class="fa fa-check"></i><b>9.3</b> dplyr 이용한 iris data 가공</a></li>
<li class="chapter" data-level="9.4" data-path="lecture-08-ggplot-data-transformation-using-dplyr.html"><a href="lecture-08-ggplot-data-transformation-using-dplyr.html#ggplot--iris-data-------"><i class="fa fa-check"></i><b>9.4</b> ggplot을 이용한 iris data 평균 값 및 에러 비교 그래프 그리기</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html"><a href="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html"><i class="fa fa-check"></i><b>10</b> Lecture 09 - ggplot / dlyr for 96well fluorescence data</a><ul>
<li class="chapter" data-level="10.1" data-path="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html"><a href="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html#dplyr-functions"><i class="fa fa-check"></i><b>10.1</b> dplyr functions</a></li>
<li class="chapter" data-level="10.2" data-path="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html"><a href="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html#data-transformation-using-melt-function"><i class="fa fa-check"></i><b>10.2</b> Data transformation using melt function</a></li>
<li class="chapter" data-level="10.3" data-path="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html"><a href="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html#scale-and-theme-of-ggplot2"><i class="fa fa-check"></i><b>10.3</b> scale and theme of ggplot2</a></li>
<li class="chapter" data-level="10.4" data-path="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html"><a href="lecture-09-ggplot-dlyr-for-96well-fluorescence-data.html#bargraph-for-96well-dataset"><i class="fa fa-check"></i><b>10.4</b> bargraph for 96well dataset</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="lecture-10-sequence-analysis-in-r-i.html"><a href="lecture-10-sequence-analysis-in-r-i.html"><i class="fa fa-check"></i><b>11</b> Lecture 10 - Sequence analysis in R I</a><ul>
<li class="chapter" data-level="11.1" data-path="lecture-10-sequence-analysis-in-r-i.html"><a href="lecture-10-sequence-analysis-in-r-i.html#biostrings-package-for-sequence-analysis"><i class="fa fa-check"></i><b>11.1</b> Biostrings package for sequence analysis</a><ul>
<li class="chapter" data-level="11.1.1" data-path="lecture-10-sequence-analysis-in-r-i.html"><a href="lecture-10-sequence-analysis-in-r-i.html#exercise-10-1"><i class="fa fa-check"></i><b>11.1.1</b> Exercise 10-1</a></li>
<li class="chapter" data-level="11.1.2" data-path="lecture-10-sequence-analysis-in-r-i.html"><a href="lecture-10-sequence-analysis-in-r-i.html#exercise-10-2"><i class="fa fa-check"></i><b>11.1.2</b> Exercise 10-2</a></li>
<li class="chapter" data-level="11.1.3" data-path="lecture-10-sequence-analysis-in-r-i.html"><a href="lecture-10-sequence-analysis-in-r-i.html#excercise-10-3"><i class="fa fa-check"></i><b>11.1.3</b> Excercise 10-3</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="lecture-10-sequence-analysis-in-r-i.html"><a href="lecture-10-sequence-analysis-in-r-i.html#download-sequence-information-from-ncbi"><i class="fa fa-check"></i><b>11.2</b> Download sequence information from NCBI</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lecture-11-sequence-analysis-in-r-ii.html"><a href="lecture-11-sequence-analysis-in-r-ii.html"><i class="fa fa-check"></i><b>12</b> Lecture 11 - Sequence analysis in R II</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">[2019 UST 일반강의] R 프로그래밍과 데이터 분석</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="lecture-04---maze-robot" class="section level1">
<h1><span class="header-section-number">5</span> Lecture 04 - Maze Robot</h1>
<div id="parameterargument-globallocal" class="section level2">
<h2><span class="header-section-number">5.1</span> Parameter/Argument, Global/Local</h2>
<p>이번 시간에는 함수와 메트릭스의 사용법을 익히기 위해서 재미있는(?) 간단한 프로그램을 만들어 보겠습니다. 정사각형 격자 안에서 랜덤하게 한 칸씩 움직이며 시작 점부터 끝 점까지 가는 로봇을 구현하고 이를 시각화하는 프로그램이 되겠습니다.</p>
<p>먼저 프로그래밍에서 함수는 중요한 개념입니다. 이를 이해하기 위해서 parameter (매개변수) 와 argument (전달인자), 그리고 global (전역) 변수와 local (지역) 변수의 개념을 확실히 이해해야 합니다. 아래 parameter와 argument를 구분하고 myfunc 안에 있는 a 변수의 값과 밖에 있는 a의 값을 구분해봅시다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">a &lt;-<span class="st"> </span><span class="dv">10</span>
myfunc &lt;-<span class="st"> </span><span class="cf">function</span>(b){
  a &lt;-<span class="st"> </span>b<span class="op">/</span><span class="dv">2</span>
  <span class="kw">return</span>(a)
}
<span class="kw">myfunc</span>(a)
<span class="kw">cat</span>(a)


## global vs local
a &lt;-<span class="st"> </span><span class="dv">10</span>
myfunc &lt;-<span class="st"> </span><span class="cf">function</span>(a){
  a &lt;-<span class="st"> </span>a<span class="op">/</span><span class="dv">10</span>
  <span class="kw">return</span>(a)
}
<span class="kw">myfunc</span>(a)
<span class="kw">cat</span>(a)</code></pre></div>
</div>
<div id="exercise-4-1-matrix-indexing" class="section level2">
<h2><span class="header-section-number">5.2</span> Exercise 4-1: Matrix indexing</h2>
<p>0으로 채워진 3 x 3 메트릭스를 만들고 가장자리 값들을 1로 채우는 연습을 해봅니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">M &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dt">nrow=</span><span class="dv">3</span>, <span class="dt">ncol=</span><span class="dv">3</span>)
M[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
M[,<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
M[<span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="dv">1</span>
M[<span class="dv">3</span>,] &lt;-<span class="st"> </span><span class="dv">1</span></code></pre></div>
</div>
<div id="top-down-design" class="section level2">
<h2><span class="header-section-number">5.3</span> Top-down design</h2>
<p>탑다운 방식의 프로그래밍 디자인방법은 간략히 다음과 같은 순서로 진행합니다. 1) Divide a big problem into smaller problems, 2) keep dividing until the small problem can be solved easily, 3) Solve the small problems, 4) Merge the solutions to solve the big problem</p>
<p>이 방법으로 길찾기 로봇을 구현하기 위해서는 다음과 같이 문제를 세분화 하겠습니다. 먼저 구성물은 지도와 로봇이 있고 지도에는 시작점, 끝점, 막힌곳, 로봇은 현재 위치, 이동함수 (규칙) 등이 있으면 될 것 같습니다. 그리고 이러한 상황을 보여주기 위한 그리기 기능도 필요해 보입니다. 참고로 강사 생각이며 각자 다르게 생각할 수 있습니다. 좀 더 자세한 내용은 <a href="https://github.com/greendaygh/Rprog2019/blob/master/04-Rprog.pdf">강의노트</a>를 참고하세요.</p>
</div>
<div id="exercise-4-2-draw-world" class="section level2">
<h2><span class="header-section-number">5.4</span> Exercise 4-2: Draw world</h2>
<p>먼저 로봇이 다니는 지도를 그리기 위해서 plot 함수를 사용합니다. plot 함수는 가장 기본이 되는 그래픽 함수로 입력 값에 따른 다양한 기능을 수행하는 함수입니다. 자세한 내용은 ?plot으로 도움말을 참고 하세요. 8 x 8 크기의 지도에서 격자를 다음과 같이 그릴 수 있습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="dv">0</span>, <span class="dt">type=</span><span class="st">&quot;n&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))

<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))
<span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>))</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-19-1.png" width="672" /></p>
<p>그런데 반복되는 lines 함수를 사용하는 패턴을 보실 수 있습니다. 이런 경우 다음과 같이 for 문을 이용할 수 있습니다. for 문의 i는 임의의 변수로 뒤에 오는 1:8 까지의 값을 한번씩 갖게 되며 각 값을 갖는 동안 { } 안의 코드를 8번 반복 실행하게 됩니다. 이 때 i에 저장된 값을 lines 파라메터 값을 사용하면 효율적으로 원하는 기능을 구현할 수 있습니다. 마지막 points 함수는 적당한 위치 (아래 예제에서는 x=3, y=3)의 위치에 pch=16 모양을 cex=3 만큼 크게 그리라는 명령입니다. ?points 또는 ?pch 등의 도움말을 참고 하세요.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot</span>(<span class="dv">0</span>, <span class="dt">type=</span><span class="st">&quot;n&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">8</span>){
  <span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(i,i), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>))
  <span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">8</span>), <span class="dt">y=</span><span class="kw">c</span>(i,i))
}

<span class="kw">points</span>(<span class="dv">3</span>,<span class="dv">3</span>, <span class="dt">pch=</span><span class="dv">16</span>, <span class="dt">cex=</span><span class="dv">3</span>)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-20-1.png" width="672" /></p>
<p>이제 앞서 코드들을 종합해서 map과 로봇을 그려주는 draw_world 라는 함수로 만들어 보겠습니다. 입력 파라메터는 현재 로봇의 위치인 cur_x, cur_y로 하고 지도를 그린 후 cur_x와 cur_y에 점(로봇)을 그리는 함수 입니다. 그리는 기능이 전부이므로 NULL을 리턴하도록 합니다 (웹페이지 작성 특성상 리턴 명령은 사용하지 않았습니다). 함수 내에서 n &lt;- 8 로 한 것은 그 아래 코드들에서 공통적으로 같은 값(지도 크기)을 사용하므로 변수에 값을 지정한 후 사용할 경우 혹시 지도의 사이즈가 변경된다고 해도 모든 값들을 바꾸지 않고 n 값만 바꿔서 쉽게 기능을 적용하기 위함 입니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">draw_world &lt;-<span class="st"> </span><span class="cf">function</span>(cur_x, cur_y){
  n &lt;-<span class="st"> </span><span class="dv">8</span>
  <span class="kw">plot</span>(<span class="dv">0</span>, <span class="dt">type=</span><span class="st">&quot;n&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">1</span>,n), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1</span>,n))
  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n){
    <span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(i,i), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,n))
    <span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,n), <span class="dt">y=</span><span class="kw">c</span>(i,i))
  }
  <span class="kw">points</span>(<span class="dt">x=</span>cur_x, <span class="dt">y=</span>cur_y, <span class="dt">pch=</span><span class="dv">16</span>, <span class="dt">cex=</span><span class="dv">3</span>)
  <span class="co">#return(NULL)</span>
}</code></pre></div>
<p>위와 같이 코드를 작성한 후 한 번 실행하여 메모리에 함수를 등록 합니다. 이후 부터는 draw_world 호출만으로 구현한 기능을 사용할 수 있습니다. 아래는 그 사용 예 입니다. cur_x 또는 cur_y에 값을 변경하여 넣어 줄 때 마다 다른 위치에 점이 그려지는 것을 확인할 수 있습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cur_x &lt;-<span class="st"> </span><span class="dv">1</span>
cur_y &lt;-<span class="st"> </span><span class="dv">1</span>

<span class="kw">draw_world</span>(cur_x, cur_y)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-22-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">draw_world</span>(cur_x<span class="op">+</span><span class="dv">1</span>, cur_y)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-22-2.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">draw_world</span>(cur_x<span class="op">+</span><span class="dv">1</span>, cur_y<span class="op">+</span><span class="dv">1</span>)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-22-3.png" width="672" /></p>
</div>
<div id="exercise-4-4-generate-map" class="section level2">
<h2><span class="header-section-number">5.5</span> Exercise 4-4: Generate map</h2>
<p>위 코드까지 작성했다면 어떤 식으로 로봇이 움직이는 것을 보여줄 수 있을지 추측할 수 있을 것입니다. 로봇이 적당한 위치로 움직이게 하고 draw_world 함수를 호출하는 과정을 반복하면 되는 것입니다. 그럼 로봇이 어떻게 어디로 움직일지를 결정하기 위해서 매트릭스를 구성해 보겠습니다. 이 매트릭스는 가상의 지도로 0과 1로 채워져 있으며 0은 로봇이 갈 수 있는 곳 1은 로봇이 가지 못하는 곳으로 정하고 로봇이 랜덤하게 움직이며 이동한 곳이 0인지 1인지 검사해서 이동을 완료할지 아니면 그 전 위치에서 다시 움직일 곳을 찾을지를 결정하면 됩니다. 먼저 0으로 채워진 매트릭스를 만들고 가장자리는 로봇이 움직이지 못 하도록 1로 채우겠습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">n&lt;-<span class="dv">8</span>
maze &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dt">nrow=</span>n, <span class="dt">ncol=</span>n)
maze[<span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="dv">1</span>
maze[n,] &lt;-<span class="st"> </span><span class="dv">1</span>
maze[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
maze[,n] &lt;-<span class="st"> </span><span class="dv">1</span></code></pre></div>
<p>이제 중앙 공간에서 이동하지 못하는 곳을 랜덤하게 정해서 넣겠습니다. 넣는 방법은 아래와 같습니다. 수업시간에 2차원 매트릭스의 인덱싱을 1차원처럼 해도 된다고 말씀 드렸습니다. 대신 인덱스 번호는 왼쪽 위로부터 1부터 시작해서 아래로 증가하고 해당 column의 길이 끝까지 간 후 다시 오른쪽 column 상단에서부터 시작되어 이어지는 인덱스 번호를 갖게 됩니다. 아래는 1부터 64까지 (가로 세로 8칸 이므로 64개) 인덱스 중 10개를 랜덤하게 뽑아서 해당 인덱스 자리의 값을 1로 채우는 코드 입니다. 앞서 가장자리를 1로 채운 곳과 겹치더라도 상관 없습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">maze[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">64</span>,<span class="dv">10</span>)] &lt;-<span class="st"> </span><span class="dv">1</span>
maze</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    1    1    1    1    1    1    1
## [2,]    1    0    0    0    0    0    0    1
## [3,]    1    0    0    0    0    0    1    1
## [4,]    1    0    0    1    0    0    0    1
## [5,]    1    0    0    0    0    0    0    1
## [6,]    1    1    0    0    0    0    0    1
## [7,]    1    0    1    0    0    0    0    1
## [8,]    1    1    1    1    1    1    1    1</code></pre>
<p>이제 위 코드를 활용해서 maze matrix 맵을 만드는 함수인 generate_maze 를 작성해 봅니다. 입력 파라메터는 n 하나로 가로 또는 세로의 (정사각형) 갯수를 의미합니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">generate_maze &lt;-<span class="st"> </span><span class="cf">function</span>(n){
  maze &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span>, <span class="dt">nrow=</span>n, <span class="dt">ncol=</span>n)
  maze[<span class="dv">1</span>,] &lt;-<span class="st"> </span><span class="dv">1</span>
  maze[n,] &lt;-<span class="st"> </span><span class="dv">1</span>
  maze[,<span class="dv">1</span>] &lt;-<span class="st"> </span><span class="dv">1</span>
  maze[,n] &lt;-<span class="st"> </span><span class="dv">1</span>
  ## blocks
  maze[<span class="kw">sample</span>(<span class="dv">1</span><span class="op">:</span>(n<span class="op">*</span>n),<span class="dv">5</span>)] &lt;-<span class="st"> </span><span class="dv">1</span>
  maze
}

mymaze &lt;-<span class="st"> </span><span class="kw">generate_maze</span>(<span class="dv">8</span>)
mymaze</code></pre></div>
<pre><code>##      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]
## [1,]    1    1    1    1    1    1    1    1
## [2,]    1    0    0    0    0    0    0    1
## [3,]    1    0    0    0    1    0    0    1
## [4,]    1    0    0    0    0    0    0    1
## [5,]    1    0    0    0    0    0    0    1
## [6,]    1    0    0    0    0    0    0    1
## [7,]    1    0    0    0    0    0    0    1
## [8,]    1    1    1    1    1    1    1    1</code></pre>
</div>
<div id="draw-blocks-and-walls" class="section level2">
<h2><span class="header-section-number">5.6</span> Draw blocks and walls</h2>
<p>이제 위에서 생성된 매트릭스를 기반으로 로봇이 가지 못하는 길을 사각형으로 그려넣어 맵을 완성합니다. 매트릭스가 8x8 일 경우 64개 포인트의 모든 값들을 비교하여 1일 경우 사각형을 그리는 코드를 만들면 되겠습니다. 이 때 값을 비교하기 위해 if 문을 사용할 수 있고 해당 값들을 비교하기 위해 아래와 같은 코드를 작성할 수 있습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="cf">if</span>(mymaze[<span class="dv">1</span>,<span class="dv">1</span>]<span class="op">==</span><span class="dv">1</span>){
  ## plot square 
}
<span class="cf">if</span>(mymaze[<span class="dv">1</span>,<span class="dv">2</span>]<span class="op">==</span><span class="dv">1</span>){
  ## plot square 
}
<span class="cf">if</span>(mymaze[<span class="dv">1</span>,<span class="dv">3</span>]<span class="op">==</span><span class="dv">1</span>){
  ## plot square 
}
...
<span class="cf">if</span>(mymaze[<span class="dv">2</span>,<span class="dv">1</span>]<span class="op">==</span><span class="dv">1</span>){
  ## plot square 
}
<span class="cf">if</span>(mymaze[<span class="dv">2</span>,<span class="dv">2</span>]<span class="op">==</span><span class="dv">1</span>){
  ## plot square 
}
<span class="cf">if</span>(mymaze[<span class="dv">2</span>,<span class="dv">3</span>]<span class="op">==</span><span class="dv">1</span>){
  ## plot square 
}
...</code></pre></div>
<p>그러나 이런식으로 64개 값들을 모두 비교하는 것은 비효율적입니다. mymaze 매트릭스의 인덱스 번호가 row와 column각각 1부터 8까지 증가하는 것으로 보면 앞에서 배웠던 for 문을 사용해서 좀 더 효율적인 코드를 만들 수 있을 듯 합니다. 아래 코드에서 nrow와 ncol은 각각 해당 매트릭스의 행과 열의 갯수를 계산해 주는 함수들 입니다. 즉, for 문을 이용하여 row 만큼 반복하고 다시 그 안에서 for문을 한 번 더 사용하여 column 수만큼 반복을 하면 해당 매트릭스의 모든 값들을 참조할 수 있습니다. 아래는 mymaze[i,j]가 1일 경우 points 문을 이용하여 pch=22 인 모양을 cex=3 크기로 bg=“gray” 색으로 칠하는 코드입니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">draw_world</span>(cur_x, cur_y)
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mymaze)){
  <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(mymaze)){
    <span class="cf">if</span>(mymaze[i,j]<span class="op">==</span><span class="dv">1</span>){
      <span class="kw">points</span>(i,j, <span class="dt">pch=</span><span class="dv">22</span>, <span class="dt">cex=</span><span class="dv">3</span>, <span class="dt">bg=</span><span class="st">&quot;gray&quot;</span>)
    }
  }
}</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-27-1.png" width="672" /></p>
<p>이제 위 코드를 앞서 만들었던 draw_world 함수에 추가하여 draw_world 함수를 호출할 경우 완전한 맵과 적당한 위치의 로봇을 그려주도록 할 수 있습니다. 그런데 맵 정보는 generate_maze 함수로 생성한 매트릭스가 가지고 있으므로 생성된 맵의 정보를 draw_world 함수 내부에서 사용할 수 있도록 파라메터로 전달해서 넘겨주는 것이 필요합니다. 따라서 maze라는 파라메터를 draw_world 함수에 추가하고 함수 내부에 있던 n 값은 입력받은 매트릭스의 row 또는 column 수를 저장하도록 n &lt;- nrow(maze) 코드를 추가합니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">draw_world &lt;-<span class="st"> </span><span class="cf">function</span>(maze, cur_x, cur_y){
  n &lt;-<span class="st"> </span><span class="kw">nrow</span>(maze)
  <span class="kw">plot</span>(<span class="dv">0</span>, <span class="dt">type=</span><span class="st">&quot;n&quot;</span>, <span class="dt">ylim=</span><span class="kw">c</span>(<span class="dv">1</span>,n), <span class="dt">xlim=</span><span class="kw">c</span>(<span class="dv">1</span>,n))
  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span>n){
    <span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(i,i), <span class="dt">y=</span><span class="kw">c</span>(<span class="dv">1</span>,n))
    <span class="kw">lines</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,n), <span class="dt">y=</span><span class="kw">c</span>(i,i))
  }

  <span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(maze)){
    <span class="cf">for</span>(j <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(maze)){
      <span class="cf">if</span>(maze[i,j]<span class="op">==</span><span class="dv">1</span>){
        <span class="kw">points</span>(i,j, <span class="dt">pch=</span><span class="dv">22</span>, <span class="dt">cex=</span><span class="dv">3</span>, <span class="dt">bg=</span><span class="st">&quot;gray&quot;</span>)
      }
    }
  }

  <span class="kw">points</span>(<span class="dt">x=</span>cur_x, <span class="dt">y=</span>cur_y, <span class="dt">pch=</span><span class="dv">16</span>, <span class="dt">cex=</span><span class="dv">3</span>)
}</code></pre></div>
<p>이제 8 x 8 맵을 생성하고 랜덤하게 길을 막은 후 로봇을 x=2, y=2로 위치하게 한 완전한 지도를 그릴 수 있습니다. 참고로 여기서 draw_world 함수에서 maze 맵을 생성하도록 generate_maze에서 수행하는 코드와 비슷한 코드를 넣을 수 있습니다. 그러나 이럴 경우 한 함수에서 두 가지 이상의 작업을 수행하게 되므로 가독성, 함수 독립성, 유지보수 용이성이 낮아지면서 프로그램의 효율성이 떨어질 수 있습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cur_x &lt;-<span class="st"> </span><span class="dv">2</span>
cur_y &lt;-<span class="st"> </span><span class="dv">2</span>
mymaze &lt;-<span class="st"> </span><span class="kw">generate_maze</span>(<span class="dv">8</span>)
<span class="kw">draw_world</span>(mymaze, cur_x, cur_y)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
<div id="move-one-step" class="section level2">
<h2><span class="header-section-number">5.7</span> Move one step</h2>
<p>이제 로봇이 한 걸음을 옮기는 코드를 작성해 보겠습니다. 로봇은 현재 위치에서 4개의 방향으로 갈 수 있으나 이 중 막힌 길로는 갈 수 없습니다. 즉 현재 위치에서 동,서,남,북 중 하나의 방향을 랜덤하게 정하고 그 방향으로 한 걸음을 움직인 곳의 지도(매트릭스)상의 값이 0이면 이동한 위치 그대로 있고 1이면 다시 왔던 자리로 돌아가면 됩니다. next_x와 next_y를 cur_x, cur_y의 한 걸음 이후 위치라 정의하면 아래와 같이 정해진 방향으로 업데이트 한 후 next_x, next_y 위치에서 draw_world를 수행하면 됩니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cur_x &lt;-<span class="st"> </span><span class="dv">2</span>
cur_y &lt;-<span class="st"> </span><span class="dv">2</span>
<span class="kw">draw_world</span>(mymaze, cur_x, cur_y)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-30-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">one_step_direction &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;E&quot;</span>,<span class="st">&quot;W&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;N&quot;</span>), <span class="dv">1</span>)
<span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;E&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
  next_y &lt;-<span class="st"> </span>cur_y
}<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;W&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
  next_y &lt;-<span class="st"> </span>cur_y
}<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;S&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x
  next_y &lt;-<span class="st"> </span>cur_y <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
}<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;N&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x
  next_y &lt;-<span class="st"> </span>cur_y <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
}
<span class="kw">draw_world</span>(mymaze, next_x, next_y)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-30-2.png" width="672" /></p>
</div>
<div id="sleep-for-delay" class="section level2">
<h2><span class="header-section-number">5.8</span> Sleep for delay</h2>
<p>그러나 위 코드를 실행하면 cur_x, cur_y 위치에 있을 때 그림은 보여지지 않고 마지막 next_x, next_y 위치 로봇에 대해서만 그림이 그려져 보이는 것을 알 수 있습니다. 이는 코드 문제라기 보다는 컴퓨터 반응시간 문제로 그림이 그려지기 전에 다른 그림이 그려지는 문제로 나타나는 현상 입니다. 따라서 Sys.sleep(1) 이라는 명령어로 1초 동안 코드 실행을 멈출 수 있고 그 동안 우리는 cur_x, cur_y 위치의 로봇이 그려지는 것을 볼 수 있습니다.</p>
<p>또한 위 코드는 지도상의 어디든 갈 수 있는 상태로 막힌 곳의 위치로는 움직이지 못 하도록 하는 코드가 필요합니다. 이를 위해 다음 마지막 부분의 if문처럼 코드를 업데이트하여 next_x, next_y 위치가 0일 경우에만 draw_world를 호출하여 그림을 업데이트 하고 그렇지 않으면 아무 일도 하지 않게 합니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">cur_x &lt;-<span class="st"> </span><span class="dv">2</span>
cur_y &lt;-<span class="st"> </span><span class="dv">2</span>
<span class="kw">draw_world</span>(mymaze, cur_x, cur_y)</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-31-1.png" width="672" /></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">Sys.sleep</span>(<span class="dv">1</span>)
one_step_direction &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;E&quot;</span>,<span class="st">&quot;W&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;N&quot;</span>), <span class="dv">1</span>)
<span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;E&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
  next_y &lt;-<span class="st"> </span>cur_y
}<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;W&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
  next_y &lt;-<span class="st"> </span>cur_y
}<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;S&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x
  next_y &lt;-<span class="st"> </span>cur_y <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
}<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;N&quot;</span>){
  next_x &lt;-<span class="st"> </span>cur_x
  next_y &lt;-<span class="st"> </span>cur_y <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
}
<span class="cf">if</span>(mymaze[next_x, next_y]<span class="op">==</span><span class="dv">0</span>){
  <span class="kw">draw_world</span>(mymaze, next_x, next_y)
}</code></pre></div>
<p><img src="Rprog_files/figure-html/unnamed-chunk-31-2.png" width="672" /></p>
</div>
<div id="move-50-steps" class="section level2">
<h2><span class="header-section-number">5.9</span> Move 50 steps</h2>
<p>이제 for 문을 이용해서 50 step 이동하는 것을 구현해 보겠습니다. 여기서 눈여겨 볼 부분은 마지막 next_x 와 next_y의 위치에 0일 경우 draw_world를 호출하지 않고 cur_x, cur_y 값을 업데이트 시켜서 효율적으로 구현했습니다.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mymaze &lt;-<span class="st"> </span><span class="kw">generate_maze</span>(<span class="dv">8</span>)
cur_x &lt;-<span class="st"> </span><span class="dv">2</span>
cur_y &lt;-<span class="st"> </span><span class="dv">2</span>
<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="dv">50</span>){
  <span class="kw">draw_world</span>(mymaze, cur_x, cur_y)
  <span class="kw">Sys.sleep</span>(<span class="dv">1</span>)
  one_step_direction &lt;-<span class="st"> </span><span class="kw">sample</span>(<span class="kw">c</span>(<span class="st">&quot;E&quot;</span>,<span class="st">&quot;W&quot;</span>, <span class="st">&quot;S&quot;</span>, <span class="st">&quot;N&quot;</span>), <span class="dv">1</span>)
  <span class="kw">cat</span>(i, <span class="st">&quot;/&quot;</span>, one_step_direction, <span class="st">&quot;</span><span class="ch">\n</span><span class="st">&quot;</span>);<span class="kw">flush.console</span>()
  <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;E&quot;</span>){
    next_x &lt;-<span class="st"> </span>cur_x <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
    next_y &lt;-<span class="st"> </span>cur_y
  }<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;W&quot;</span>){
    next_x &lt;-<span class="st"> </span>cur_x <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
    next_y &lt;-<span class="st"> </span>cur_y
  }<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;S&quot;</span>){
    next_x &lt;-<span class="st"> </span>cur_x
    next_y &lt;-<span class="st"> </span>cur_y <span class="op">-</span><span class="st"> </span><span class="dv">1</span>
  }<span class="cf">else</span> <span class="cf">if</span>(one_step_direction<span class="op">==</span><span class="st">&quot;N&quot;</span>){
    next_x &lt;-<span class="st"> </span>cur_x
    next_y &lt;-<span class="st"> </span>cur_y <span class="op">+</span><span class="st"> </span><span class="dv">1</span>
  }
  <span class="cf">if</span>(mymaze[next_x, next_y]<span class="op">==</span><span class="dv">0</span>){
    cur_x &lt;-<span class="st"> </span>next_x
    cur_y &lt;-<span class="st"> </span>next_y
  }
}</code></pre></div>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="lecture-03-r-basics-ii.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="lecture-05-multiple-plate-reader-file.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:" && /^https?:/.test(src))
      src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
